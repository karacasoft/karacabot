language: node-js
node_js:
  - 12
script:
  - yarn build
  on:
    branch: deploy
before_install:
  - openssl aes-256-cbc -K $encrypted_e8c214013cf0_key -iv $encrypted_e8c214013cf0_iv
    -in deploy_rsa.pub.enc -out ./ssh/deploy_rsa.pub -d
deploy:
  provider: script
  skip_cleanup: true
  script:
    - rsync -r --delete-after --quiet $TRAVIS_BUILD_DIR/build duvarboun@134.209.31.56:/home/duvarboun/karacabot/build
    - ssh duvarboun@134.209.31.56 cd karacabot && yarn install
  on:
    branch: deploy